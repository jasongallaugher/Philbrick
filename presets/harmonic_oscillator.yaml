name: "Harmonic Oscillator"
description: |
  Classic harmonic oscillator demonstrating the equation x'' = -w^2 * x.
  This creates a sine/cosine oscillation with frequency determined by w (omega).
  The feedback loop connects two integrators: the first integrates acceleration
  to get velocity, the second integrates velocity to get position. The position
  is then fed back through a coefficient (-w^2) to produce the acceleration.
  Initial conditions set x(0) = 1.0 (max displacement) and x'(0) = 0 (at rest).

components:
  # First integrator: integrates acceleration to produce velocity
  - name: INT_VEL
    type: Integrator
    params:
      initial: 0.0   # x'(0) = 0 (starting at rest)
      gain: 1.0

  # Second integrator: integrates velocity to produce position
  - name: INT_POS
    type: Integrator
    params:
      initial: 1.0   # x(0) = 1.0 (starting at max displacement)
      gain: 1.0

  # Coefficient for -w^2 (omega squared)
  # With k = -1.0, this gives w = 1 rad/s (period ~ 6.28 seconds)
  - name: OMEGA_SQ
    type: Coefficient
    params:
      k: -1.0

patches:
  # Position -> coefficient -> acceleration (feedback)
  - [INT_POS.out, OMEGA_SQ.in]

  # Acceleration -> velocity integrator
  - [OMEGA_SQ.out, INT_VEL.in]

  # Velocity -> position integrator
  - [INT_VEL.out, INT_POS.in]

scope:
  channels:
    - source: INT_POS.out
      label: "Position (x)"
    - source: INT_VEL.out
      label: "Velocity (x')"
